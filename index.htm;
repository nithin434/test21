{% extends "base.html" %}

{% block title %}Quantum Stealth Messaging - Secure Anonymous Communication{% endblock %}

{% block head %}
<script defer src="https://umami.indominuslabs.in/script.js" data-website-id="0dbb3412-2c96-450a-805b-66a9fe313588"></script>
{% endblock %}

{% block content %}
<div class="container mt-5">
    <!-- Hero Section -->
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="quantum-container p-5 text-center">
                <div class="quantum-pulse">
                    <i class="fas fa-atom fa-5x quantum-glow mb-4"></i>
                </div>
                <h1 class="display-4 fw-bold mb-4">
                    Enhanced <span class="quantum-glow">Quantum</span> Stealth Messaging
                </h1>
                <p class="lead mb-4">
                    Experience the future of secure communication with quantum-enhanced anonymous messaging.
                    Powered by real quantum computing protocols including BB84, QFT, and quantum teleportation.
                </p>
                
                {% if quantum_available %}
                    <div class="alert alert-quantum mb-4">
                        <i class="fas fa-check-circle"></i>
                        <strong>Quantum Ready!</strong> Full quantum computing capabilities are available.
                    </div>
                {% else %}
                    <div class="alert alert-warning mb-4">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>Classical Simulation Mode</strong> - Install Qiskit & Cirq for full quantum features.
                    </div>
                {% endif %}
                
                <div class="d-grid gap-3 d-md-flex justify-content-md-center">
                    <a href="{{ url_for('dashboard') }}" class="btn btn-quantum btn-lg">
                        <i class="fas fa-rocket"></i> Enter Quantum Network
                    </a>
                    <button type="button" class="btn btn-quantum-outline btn-lg" data-bs-toggle="modal" data-bs-target="#infoModal">
                        <i class="fas fa-info-circle"></i> Learn More
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Device Information -->
    <div class="row mt-5">
        <div class="col-lg-6">
            <div class="card-quantum p-4">
                <h4 class="quantum-glow mb-3">
                    <i class="fas fa-desktop"></i> Your Device Information
                </h4>
                <div class="row">
                    <div class="col-sm-6">
                        <strong>IP Address:</strong><br>
                        <span class="text-info">{{ client_info.ip }}</span>
                    </div>
                    <div class="col-sm-6">
                        <strong>MAC Address:</strong><br>
                        <span class="text-info">{{ client_info.mac_address }}</span>
                    </div>
                </div>
                <hr class="my-3">
                <div class="row">
                    <div class="col-sm-6">
                        <strong>Quantum Device ID:</strong><br>
                        <span class="quantum-glow">{{ client_info.device_id }}</span>
                    </div>
                    <div class="col-sm-6">
                        <strong>Session Started:</strong><br>
                        <span class="text-muted" id="session-time">{{ "%.0f"|format(client_info.join_time) }}</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6">
            <div class="card-quantum p-4">
                <h4 class="quantum-glow mb-3">
                    <i class="fas fa-shield-alt"></i> Security Features
                </h4>
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <i class="fas fa-check text-success"></i>
                        BB84 Quantum Key Distribution
                    </li>
                    <li class="mb-2">
                        <i class="fas fa-check text-success"></i>
                        Quantum Fourier Transform Encryption
                    </li>
                    <li class="mb-2">
                        <i class="fas fa-check text-success"></i>
                        Quantum Teleportation Protocol
                    </li>
                    <li class="mb-2">
                        <i class="fas fa-check text-success"></i>
                        Grover Search Key Verification
                    </li>
                    <li class="mb-2">
                        <i class="fas fa-check text-success"></i>
                        Anonymous Device Identification
                    </li>
                    <li class="mb-2">
                        <i class="fas fa-check text-success"></i>
                        Quantum Entanglement Channels
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <div class="row mt-5">
        <div class="col-12">
            <h2 class="text-center quantum-glow mb-5">
                <i class="fas fa-cogs"></i> Quantum Protocol Features
            </h2>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="card-quantum p-4 text-center h-100">
                <i class="fas fa-key fa-3x quantum-glow mb-3"></i>
                <h5>BB84 Key Distribution</h5>
                <p class="text-muted">
                    Quantum key distribution using polarized photons with automatic eavesdropping detection.
                </p>
            </div>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="card-quantum p-4 text-center h-100">
                <i class="fas fa-wave-square fa-3x quantum-glow mb-3"></i>
                <h5>QFT Encryption</h5>
                <p class="text-muted">
                    Quantum Fourier Transform-based encryption for enhanced message security.
                </p>
            </div>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="card-quantum p-4 text-center h-100">
                <i class="fas fa-satellite fa-3x quantum-glow mb-3"></i>
                <h5>Quantum Teleportation</h5>
                <p class="text-muted">
                    Instantaneous quantum state transfer using entangled particle pairs.
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Information Modal -->
<div class="modal fade" id="infoModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="background: var(--quantum-secondary); border: 1px solid rgba(0, 255, 136, 0.3);">
            <div class="modal-header">
                <h5 class="modal-title quantum-glow">
                    <i class="fas fa-atom"></i> About Quantum Stealth Messaging
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <h6 class="quantum-glow">How It Works:</h6>
                <ul class="mb-4">
                    <li><strong>BB84 Protocol:</strong> Establishes quantum-secure keys using photon polarization</li>
                    <li><strong>Quantum Encryption:</strong> Messages encrypted using Quantum Fourier Transform</li>
                    <li><strong>Anonymous Identity:</strong> Quantum-generated device IDs prevent tracking</li>
                    <li><strong>Secure Channels:</strong> Quantum entanglement ensures communication security</li>
                </ul>
                
                <h6 class="quantum-glow">Security Benefits:</h6>
                <ul class="mb-4">
                    <li>Eavesdropping automatically detected by quantum mechanics</li>
                    <li>Information-theoretic security (not just computational)</li>
                    <li>No-cloning theorem prevents message interception</li>
                    <li>Heisenberg uncertainty principle protects key distribution</li>
                </ul>
                
                <h6 class="quantum-glow">Network Features:</h6>
                <ul>
                    <li>Multi-device quantum network with real-time status</li>
                    <li>Protocol testing and verification tools</li>
                    <li>Quantum fidelity and coherence monitoring</li>
                    <li>Advanced cryptographic verification</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-quantum-outline" data-bs-dismiss="modal">Close</button>
                <a href="{{ url_for('dashboard') }}" class="btn btn-quantum">Start Messaging</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Update session time display
    function updateSessionTime() {
        const sessionStart = {{ client_info.join_time }};
        const now = Date.now() / 1000;
        const elapsed = Math.floor(now - sessionStart);
        
        const hours = Math.floor(elapsed / 3600);
        const minutes = Math.floor((elapsed % 3600) / 60);
        const seconds = elapsed % 60;
        
        let timeStr = '';
        if (hours > 0) timeStr += hours + 'h ';
        if (minutes > 0) timeStr += minutes + 'm ';
        timeStr += seconds + 's ago';
        
        $('#session-time').text(timeStr);
    }
    
    // Update every second
    updateSessionTime();
    setInterval(updateSessionTime, 1000);
});
</script>
{% endblock %}
